function setup(){createCanvas(800,600),angleMode(DEGREES),textAlign(CENTER,CENTER),textSize(14)}function draw(){switch(background(10),translate(width/2,height/2),stroke(100),line(-width/2,0,width/2,0),line(0,-height/2,0,height/2),step){case 0:resetMatrix(),fill(255),noStroke(),text("Click to set the red vector",width/2,25),translate(width/2,height/2);const t=mouseVec();drawPreviewVector(t,color(255,100,100));break;case 1:v1.drawWithMatrix(color(255,100,100)),resetMatrix(),fill(255),noStroke(),text("Click to set the blue vector",width/2,25),translate(width/2,height/2);const e=mouseVec();drawPreviewVector(e,color(100,150,255));break;case 2:const i=p5.Vector.dist(v2.offset,v1.vec),o=i>7?.05:.15;v2.offset.lerp(v1.vec,o),v1.drawWithMatrix(color(255,100,100)),v2.drawWithMatrix(color(100,150,255)),i<2&&(v2.offset=v1.vec.copy(),step=3);break;case 3:v1.drawWithMatrix(color(255,100,100)),v2.drawWithMatrix(color(100,150,255));const r=v2.tip();push(),fill(255),noStroke(),textSize(16),textAlign(CENTER,BOTTOM),text("place your mouse here",r.x-textWidth("place your mouse here")/2,r.y-10),circle(r.x,r.y,7*-sin(15*frameCount)+7),pop();const s=mouseVec();p5.Vector.dist(s,r)<=5&&(step=4);break;case 4:const a=mouseVec(),c=v1.original.x*v2.original.y-v1.original.y*v2.original.x;if(abs(c)>.001){const t=(a.x*v2.original.y-a.y*v2.original.x)/c,e=(v1.original.x*a.y-v1.original.y*a.x)/c;v1.setScale(t),v2.setScale(e),v2.offset=v1.vec.copy()}else push(),textSize(30),fill("orange"),text("vectors are parallel !!! click to reset",0,0),pop();v1.drawWithScaleAndMatrix(color(255,100,100)),v2.drawWithScaleAndMatrix(color(100,150,255)),fill(255),noStroke(),textSize(16),textAlign(CENTER,CENTER),text("("+a.x.toFixed(0)+", "+(-a.y).toFixed(0)+")",a.x-35,a.y-15),textSize(14),resetMatrix(),fill(255),noStroke(),text("Move mouse to scale vectors. Click to reset.",width/2,25),translate(width/2,height/2)}}function mousePressed(){switch(step){case 0:v1=new Vector(mouseVec()),step=1;break;case 1:v2=new Vector(mouseVec()),step=2;break;case 2:break;case 3:step++;break;default:step=0,v1=v2=void 0}}function drawBrackets(t,e){stroke(255),strokeWeight(2),noFill();const i=t-20,o=t+35,r=e-15,s=e+15;line(i,r,i,s),line(i,r,i+5,r),line(i,s,i+5,s),line(o,r,o,s),line(o-5,r,o,r),line(o-5,s,o,s)}function mouseVec(){return createVector(mouseX-width/2,mouseY-height/2)}function drawPreviewVector(t,e){stroke(e),strokeWeight(2),line(0,0,t.x,t.y),push(),translate(t.x,t.y),rotate(t.heading()),fill(e),noStroke(),triangle(0,0,-10,6,-10,-6),pop();const i=t.x+40,o=t.y;drawBrackets(i,o),fill(255),noStroke(),textSize(16),textAlign(CENTER,CENTER),text(t.x.toFixed(0),i+7,o-7),text((-t.y).toFixed(0),i+7,o+10),textSize(14)}let v1,v2,step=0;class Vector{constructor(t){this.vec=t.copy(),this.original=t.copy(),this.offset=createVector(0,0),this.scale=1}setScale(t){this.vec=p5.Vector.mult(this.original,t),this.scale=t,this.offset=createVector(0,0)}tip(){return p5.Vector.add(this.offset,this.vec)}draw(t){const e=this.offset,i=this.tip();stroke(t),strokeWeight(3),line(e.x,e.y,i.x,i.y),push(),translate(i.x,i.y),rotate(this.vec.heading()),fill(t),noStroke(),triangle(0,0,-10,6,-10,-6),pop()}drawWithMatrix(t){this.draw(t);const e=this.tip(),i=e.x+40,o=e.y;drawBrackets(i,o),fill(255),noStroke(),textSize(16),textAlign(CENTER,CENTER),text(this.vec.x.toFixed(0),i+7,o-7),text((-this.vec.y).toFixed(0),i+7,o+10),textSize(14)}drawWithScaleAndMatrix(t){this.draw(t);const e=this.tip(),i=p5.Vector.add(this.offset,e).div(2),o=e.x+40,r=e.y;drawBrackets(o,r),fill(255),noStroke(),textSize(16),textAlign(CENTER,CENTER),text(this.vec.x.toFixed(0),o+7,r-7),text((-this.vec.y).toFixed(0),o+7,r+10),text(this.scale.toFixed(2)+"Ã—",i.x,i.y-20),textSize(14)}}